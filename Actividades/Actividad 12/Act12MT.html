<P>Alumno: Manuel Jesus Tello May<br>

  Profesor: Jorge Pedrozo<br>

  Asignatura: Fundamentos de álgebra<br>

  Grupo: 1B<br>

  Institución: Tecnológico de Software</P><br>

<!-- Estructura básica del documento HTML -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>División sintética</title>
<style>
   * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f5f5;
    min-height: 100vh;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.container {
    background: white;
    border-radius: 8px;
    padding: 40px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    max-width: 800px;
    width: 100%;
}

h1 {
    color: #0d32ec;
    text-align: center;
    margin-bottom: 10px;
    font-size: 1.8em;
    font-weight: 600;
}

.subtitle {
    text-align: center;
    color: #158ee5;
    margin-bottom: 30px;
    font-size: 0.9em;
}

.input-section {
    margin-bottom: 25px;
}

label {
    display: block;
    margin-bottom: 8px;
    color: #fb3f3f;
    font-weight: 600;
}

.help-text {
    font-size: 0.85em;
    color: #46e840;
    margin-top: 5px;
}

input[type="text"] {
    width: 100%;
    padding: 12px;
    border: 1px solid #161414;
    border-radius: 4px;
    font-size: 1em;
    transition: border-color 0.3s;
}

input[type="text"]:focus {
    outline: none;
    border-color: #32e097;
}

button {
    width: 100%;
    padding: 15px;
    background: #1c9a05;
    color: rgb(255, 255, 255);
    border: none;
    border-radius: 4px;
    font-size: 1em;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
}

button:hover {
    background: #066907;
}

button:active {
    background: #821919;
}

.result-section {
    margin-top: 30px;
    padding: 20px;
    background: #eb702e;
    border-radius: 4px;
    border: 1px solid #0b0b0b;
    display: none;
}

.result-section.show {
    display: block;
}

.result-title {
    color: #fbf7f7;
    font-weight: 600;
    margin-bottom: 15px;
    font-size: 1.1em;
}

.process-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
    background: rgb(136, 230, 241);
    border-radius: 4px;
    overflow: hidden;
    border: 1px solid #e0e0e0;
}

.process-table td {
    padding: 10px;
    text-align: center;
    border: 1px solid #e0e0e0;
}

.process-table tr:first-child td {
    background: #5823f7;
    color: white;
    font-weight: 500;
}

.divisor-cell {
    background: #ffffff;
    font-weight: 500;
}

.final-result {
    background: #f0f0f0;
    padding: 15px;
    border-radius: 4px;
    margin-top: 15px;
    border: 1px solid #e0e0e0;
}

.final-result p {
    margin: 8px 0;
    color: #000000;
}

.error {
    background: #ffebee;
    color: #c62828;
    padding: 15px;
    border-radius: 4px;
    margin-top: 15px;
    border: 1px solid #ffcdd2;
}

.example {
    background: #fafafa;
    padding: 10px;
    border-radius: 4px;
    margin-top: 10px;
    font-size: 0.85em;
    border: 1px solid #e0e0e0;
}
</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
</head>
<body>
    <div class="container">
    <h1>División Sintética de Polinomios</h1>
    <p class="subtitle">Soporta coeficientes y raíces reales y complejas</p>

    <div class="input-section">
        <label for="polinomio">Polinomio:</label>
        <input type="text" id="polinomio" placeholder="Ejemplo: 5x^3 + 3x^2 + 2x + 1 o x^2 - 6x + 11">
        <p class="help-text">Ingresa el polinomio con formato algebraico</p>
        <div class="example">
            <strong>Ejemplos:</strong><br>
            • 5x^3 + 3x^2 + 2x + 1<br>
            • x^3 - 6x^2 + 11x - 6<br>
            • 2x^2 + (3+2i)x + 1<br>
            • x^4 - 1
        </div>
    </div>

    <div class="input-section">
        <label for="raiz">Raíz (divisor):</label>
        <input type="text" id="raiz" placeholder="Ejemplo: 2 o 1+i">
        <p class="help-text">Ingresa el valor de la raíz (puede ser complejo)</p>
        <div class="example">
            <strong>Ejemplos:</strong> 2, -3, 1+i, 2-3i
        </div>
    </div>

    <button onclick="calcularDivision()">Calcular División Sintética</button>

    <div id="resultado" class="result-section"></div>
</div>
<script>
   class NumeroComplejo {
    constructor(real, imag = 0) {
        this.real = real;
        this.imag = imag;
    }

    sumar(otro) {
        return new NumeroComplejo(
            this.real + otro.real,
            this.imag + otro.imag
        );
    }

    multiplicar(otro) {
        return new NumeroComplejo(
            this.real * otro.real - this.imag * otro.imag,
            this.real * otro.imag + this.imag * otro.real
        );
    }

    toString() {
        if (isNaN(this.real) || isNaN(this.imag)) return "Error";

        if (this.imag === 0) {
            return this.real.toFixed(4).replace(/\.?0+$/, '');
        }
        
        const realStr = this.real.toFixed(4).replace(/\.?0+$/, '');
        const imagStr = Math.abs(this.imag).toFixed(4).replace(/\.?0+$/, '');
        
        if (this.real === 0) {
            return `${imagStr}i`;
        }
        
        const signo = this.imag >= 0 ? '+' : '-';
        return `${realStr}${signo}${imagStr}i`;
    }

    esReal() {
        return Math.abs(this.imag) < 1e-10;
    }
}

function parsearPolinomio(str) {
    if (!str || str.trim() === "") throw new Error("El campo del polinomio está vacío.");
    
    str = str.trim().replace(/\s/g, '');
    
    if (/[^x\d\+\-\^i\.]/.test(str)) {
        throw new Error("El polinomio contiene caracteres inválidos.");
    }
    
    const gradoMatch = str.match(/x\^(\d+)/g);
    let gradoMax = 1;
    
    if (gradoMatch) {
        gradoMax = Math.max(...gradoMatch.map(m => parseInt(m.match(/\d+/)[0])));
    } else if (str.includes('x')) {
        gradoMax = 1;
    } else {
        gradoMax = 0;
    }
    
    const coeficientes = new Array(gradoMax + 1).fill(null).map(() => new NumeroComplejo(0));
    
    str = str.replace(/([+-])\s*x/g, '$1 1x');
    str = str.replace(/^x/, '1x');
    
    const terminos = str.match(/[+-]?[^+-]+/g) || [];
    
    for (let termino of terminos) {
        termino = termino.trim();
        if (!termino) continue;
        
        let coef, grado;
        
        try {
            if (!termino.includes('x')) {
                coef = parsearComplejo(termino);
                grado = 0;
            } else if (termino.includes('x^')) {
                const partes = termino.split('x^');
                if (partes[0] === '' || partes[0] === '+') coef = new NumeroComplejo(1);
                else if (partes[0] === '-') coef = new NumeroComplejo(-1);
                else coef = parsearComplejo(partes[0]);
                
                grado = parseInt(partes[1]);
            } else {
                const partes = termino.split('x');
                if (partes[0] === '' || partes[0] === '+') coef = new NumeroComplejo(1);
                else if (partes[0] === '-') coef = new NumeroComplejo(-1);
                else coef = parsearComplejo(partes[0]);
                
                grado = 1;
            }

            if (isNaN(grado)) throw new Error("Grado inválido en término: " + termino);
            
            const indice = gradoMax - grado;
            if (indice < 0 || indice >= coeficientes.length) {
                throw new Error("Error en el orden de los exponentes.");
            }

            coeficientes[indice] = coeficientes[indice].sumar(coef);

        } catch (e) {
            throw new Error(`Error al procesar el término '${termino}': ${e.message}`);
        }
    }
    
    return coeficientes;
}

function parsearComplejo(str) {
    if (!str) return new NumeroComplejo(0);
    str = str.trim().replace(/\s/g, '');
    
    if (!str.includes('i')) {
        const val = parseFloat(str);
        if (isNaN(val)) throw new Error(`'${str}' no es un número válido.`);
        return new NumeroComplejo(val);
    }

    str = str.replace(/i/g, '');
    if (str === '' || str === '+') return new NumeroComplejo(0, 1);
    if (str === '-') return new NumeroComplejo(0, -1);
    
    let real = 0;
    let imag = 0;

    const regex = /([+-]?\d*\.?\d+)([+-]\d*\.?\d+)?/; 
    const match = str.match(regex);

    if (match) {
        if (str.indexOf('+') > 0 || (str.indexOf('-') > 0 && str.indexOf('-') !== 0)) {
            const partes = str.split(/(?=[+-])/);
            const cleanPartes = partes.filter(p => p !== "");
            
            if(cleanPartes.length === 2) {
                real = parseFloat(cleanPartes[0]);
                imag = parseFloat(cleanPartes[1]);
            } else {
                imag = parseFloat(str);
            }
        } else {
            imag = parseFloat(str);
        }
    } else {
         imag = parseFloat(str);
    }

    if (isNaN(real)) real = 0;
    if (isNaN(imag)) throw new Error(`Componente imaginario inválido en '${str}i'`);

    return new NumeroComplejo(real, imag);
}

// Nueva función para parsear el divisor lineal (ej: "x+1" -> raíz -1)
function parsearDivisor(str) {
    if (!str || str.trim() === "") throw new Error("El campo del divisor está vacío.");
    str = str.trim().replace(/\s/g, '');
    
    // Debe ser de la forma x, x+c, x-c, donde c es un número real
    const match = str.match(/^x([+-]?\d*\.?\d+)?$/);
    if (!match) {
        throw new Error("El divisor debe ser de la forma 'x', 'x+c' o 'x-c' (ej: x+1, x-2).");
    }
    
    const cStr = match[1];
    const c = cStr ? parseFloat(cStr) : 0; // Si no hay c, es x+0
    if (isNaN(c)) {
        throw new Error(`El coeficiente en el divisor '${str}' no es un número válido.`);
    }
    
    // El divisor es x + c = x - (-c), así que la raíz es -c
    return new NumeroComplejo(-c);
}

function calcularDivision() {
    const resultDiv = document.getElementById('resultado');
    resultDiv.style.display = 'none';
    resultDiv.innerHTML = '';

    try {
        const polinomioStr = document.getElementById('polinomio').value;
        const divisorStr = document.getElementById('raiz').value; // Ahora es el divisor, no la raíz

        if (!polinomioStr || !divisorStr) {
            throw new Error('Por favor ingresa todos los datos.');
        }

        const coeficientes = parsearPolinomio(polinomioStr);
        const raiz = parsearDivisor(divisorStr); // Extrae la raíz del divisor

        if (coeficientes.some(c => isNaN(c.real) || isNaN(c.imag))) {
            throw new Error("Error al interpretar los coeficientes del polinomio.");
        }
        if (isNaN(raiz.real) || isNaN(raiz.imag)) {
            throw new Error("El divisor no es válido.");
        }

        const resultado = divisionSintetica(coeficientes, raiz);
        mostrarResultado(resultado, coeficientes, raiz, polinomioStr, divisorStr);

    } catch (error) {
        console.error(error);
        resultDiv.innerHTML = `
            <div class="error">
                <p><strong>⚠ Error de Cálculo</strong></p>
                <p>${error.message}</p>
                <p style="font-size: 0.8em; margin-top:5px">Revisa que no haya letras extrañas o múltiples signos seguidos.</p>
            </div>
        `;
        resultDiv.classList.add('show');
        resultDiv.style.display = 'block';
    }
}

function divisionSintetica(coeficientes, raiz) {
    const n = coeficientes.length;
    const proceso = [];
    const resultado = [];

    proceso.push([...coeficientes]);
    proceso.push([new NumeroComplejo(0)]);
    
    resultado.push(coeficientes[0]);
    
    for (let i = 1; i < n; i++) {
        const producto = resultado[i - 1].multiplicar(raiz);
        proceso[1].push(producto);
        resultado.push(coeficientes[i].sumar(producto));
    }

    const cociente = resultado.slice(0, -1);
    const residuo = resultado[resultado.length - 1];

    return {
        proceso: proceso,
        resultado: resultado,
        cociente: cociente,
        residuo: residuo
    };
}

function mostrarResultado(resultado, coeficientes, raiz, polinomioOriginal, divisorStr) {
    let html = '<div class="result-title">Polinomio Original</div>';
    html += '<div style="text-align: center; font-size: 1.2em; margin-bottom: 20px; padding: 15px; background: white; border: 1px solid #e0e0e0; border-radius: 4px; color: #111;">';
    html += '<strong>' + polinomioOriginal + '</strong>';
    html += '</div>';

    html += '<div class="result-title">Coeficientes Extraídos</div>';
    html += '<div style="overflow-x: auto;">';
    html += '<table class="process-table" style="margin-bottom: 30px;">';
    html += '<tr>';
    for (let i = 0; i < coeficientes.length; i++) {
        const exp = coeficientes.length - 1 - i;
        html += '<td><strong>';
        if (exp === 0) {
            html += 'Término ind.';
        } else if (exp === 1) {
            html += 'x';
        } else {
            html += 'x<sup>' + exp + '</sup>';
        }
        html += '</strong></td>';
    }
    html += '</tr>';
    html += '<tr>';
    coeficientes.forEach(c => {
        html += '<td>' + c.toString() + '</td>';
    });
    html += '</tr>';
    html += '</table>';
    html += '</div>';

    html += '<div class="result-title">Proceso de División Sintética</div>';
    
    html += '<div style="overflow-x: auto;">';
    html += '<table class="process-table">';
    
    html += '<tr><td class="divisor-cell">Divisor: ' + divisorStr + ' (Raíz: ' + raiz.toString() + ')</td>';
    coeficientes.forEach(c => {
        html += '<td>' + c.toString() + '</td>';
    });
    html += '</tr>';

    html += '<tr><td class="divisor-cell">Multiplicar y bajar</td>';
    resultado.proceso[1].forEach(p => {
        html += '<td>' + p.toString() + '</td>';
    });
    html += '</tr>';

    html += '<tr><td class="divisor-cell">Resultado (sumar)</td>';
    resultado.resultado.forEach(r => {
        html += '<td>' + r.toString() + '</td>';
    });
    html += '</tr>';

    html += '</table>';
    html += '</div>';

    html += '<div class="final-result">';
    html += '<p><strong>Cociente (Q):</strong> ';
    
    let cocienteStr = '';
    let firstTerm = true;
    for (let i = 0; i < resultado.cociente.length; i++) {
        const exp = resultado.cociente.length - 1 - i;
        const coef = resultado.cociente[i];
        
        if (Math.abs(coef.real) > 1e-10 || Math.abs(coef.imag) > 1e-10 || resultado.cociente.length === 1) {
            
            if (!firstTerm) {
                 cocienteStr += ' + ';
            }
            
            const coefText = coef.toString();
            if(coefText.includes('+') || coefText.includes('-')) {
                cocienteStr += '(' + coefText + ')';
            } else {
                cocienteStr += coefText;
            }
            
            if (exp > 0) {
                cocienteStr += 'x';
                if (exp > 1) {
                    cocienteStr += '<sup>' + exp + '</sup>';
                }
            }
            firstTerm = false;
        }
    }
    
    if (cocienteStr === '') cocienteStr = '0';
    html += cocienteStr;
    html += '</p>';
    
    html += '<p><strong>Residuo (R):</strong> ' + resultado.residuo.toString() + '</p>';
    
    if (resultado.residuo.esReal() && Math.abs(resultado.residuo.real) < 1e-10) {
        html += '<p style="color: #4cd137; font-weight: 600; margin-top:10px;">✓ La división es exacta (Raíz encontrada)</p>';
    }
    
    html += '</div>';

    document.getElementById('resultado').innerHTML = html;
    document.getElementById('resultado').classList.add('show');
    document.getElementById('resultado').style.display = 'block';
}
</script>
</body>
</html>